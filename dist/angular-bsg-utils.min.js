/* 
BSG utils
LA County Assessor v1.5.1
Copyright (c) 2016 Los Angeles County Assessor, http://assessor.lacounty.gov/
*/
!function(t){var e=function(t,e){var n=function(e,n){function r(){if(y?(l=t("filter")(h,s,o),g=l.length):(l=h,g=h.length),b){var e=t("groupBy")(l,c);l=Object.keys(e).map(function(t){return{key:t,rows:e[t]}})}f.pages=i(l,m.pageLength)}function i(t,e){var n=t.slice(),r=[];do r.push(e?n.splice(0,e):n.splice(0));while(n.length);return r}function a(t,e,n){return Math.min(Math.max(t,e),n)}function u(t){for(var e=[],n=0;t>n;n++)e.push(n);return e}var s,o,g,c,f=this,h=[],l=[],d=[],p=[],P=0,v=0,y=!1,b=!1,m={pageLength:10,rangeLength:7};Object.defineProperty(this,"data",{get:function(){return h},set:function(t){h=t||[],y=!1,b=!1,r()}}),Object.defineProperty(this,"pages",{get:function(){return d},set:function(t){d=t||[],this.currentPageIndex=0,p=u(t.length)}}),Object.defineProperty(this,"currentRange",{get:function(){return p.slice(v,v+m.rangeLength)}}),Object.defineProperty(this,"currentPageIndex",{get:function(){return P},set:function(t){P=a(t,0,this.pages.length-1),v=Math.floor(P/m.rangeLength)*m.rangeLength}}),Object.defineProperty(this,"lastPageIndex",{get:function(){return this.pages.length-1}}),Object.defineProperty(this,"currentPage",{get:function(){return this.pages[this.currentPageIndex]}}),Object.defineProperty(this,"pageLength",{get:function(){return m.pageLength}}),Object.defineProperty(this,"currentPageOffset",{get:function(){return v}}),Object.defineProperty(this,"hasMultiplePage",{get:function(){return this.pages.length>1}}),Object.defineProperty(this,"currentRecordCount",{get:function(){return y?g:h.length}}),Object.defineProperty(this,"isAtMaxOffset",{get:function(){return v==this.currentMaxOffset}}),Object.defineProperty(this,"currentMaxOffset",{get:function(){return Math.floor(this.lastPageIndex/m.rangeLength)*m.rangeLength}}),this.getInfo=function(){if(!this.data.length)return"";var t=this.currentPageIndex*m.pageLength+1,e=a(m.pageLength+t-1,0,this.currentRecordCount),n="Showing "+t+" to "+e+" of "+this.currentRecordCount+" entries.",r="(filtered from "+this.data.length+" total entries)";return n+(y?r:"")},this.shiftOffset=function(){return v+=m.rangeLength,v=a(v,0,this.currentMaxOffset),this.currentPageIndex=a(this.currentPageIndex,v,Math.min(v+m.rangeLength,this.pages.length)-1),this.currentPageOffset},this.unshiftOffset=function(){return v-=m.rangeLength,v=a(v,0,this.currentMaxOffset),this.currentPageIndex=a(this.currentPageIndex,v,Math.min(v+m.rangeLength,this.pages.length)-1),this.currentPageOffset},this.shiftPage=function(t){this.currentPageIndex++},this.unshiftPage=function(){this.currentPageIndex--},this.setFilter=function(t,e){s=t,o=e,y=!0,r()},this.clearFilter=function(){y=!1,r()},this.setGroupBy=function(t){b=!0,c=t,r()},this.clearGroupBy=function(){b=!1,r()},angular.extend(m,n),this.data=e};return n};t.factory("bsgPager",["$filter","bsgUtils",e])}(function(){var t;try{t=angular.module("bsg")}catch(e){t=angular.module("bsg",[])}return t}()),function(t){var e=function(t,e){var n=function(){var n,r=e.defer();try{n=new Event("resize")}catch(i){n=t.document.createEvent("UIEvents"),n.initUIEvent("resize",!0,!1,t,0)}return t.onresize=function(){r.resolve()},t.dispatchEvent(n),r.promise},r=function(e){if(!angular.isObject(e))return null==e?"":e.toString();var n=[];for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];n.push(t.encodeURIComponent(r)+"="+t.encodeURIComponent(i||""))}return n.join("&").replace(/%20/g,"+")},i=function(n){var r=[],i=[];if(angular.isString(n))r.push(n);else{if(!angular.isArray(n)||!angular.isString(n[0]))return e.reject();r.push.apply(r,n)}return angular.forEach(r,function(n){if(angular.isString(n)){var r=angular.element(document.createElement("script"));r.attr("charset","utf-8"),r.attr("src",n);var a=angular.element(t.document.head);a.append(r);var u=e.defer();r[0].onload=function(){u.resolve()},r[0].onerror=function(){u.reject()},i.push(u.promise)}}),e.all(i)};return{triggerResize:n,param:r,addScript:i}};t.factory("bsgUtils",["$window","$q",e])}(function(){var t;try{t=angular.module("bsg")}catch(e){t=angular.module("bsg",[])}return t}()),function(t){var e=function(){return function(t){return"string"==typeof t?0==t.length?null:/^((yes)|(true)|y)$/i.test(t.trim())?"Yes":"No":null==t?null:t?"Yes":"No"}};t.filter("bsgYesno",[e])}(function(){var t;try{t=angular.module("bsg")}catch(e){t=angular.module("bsg",[])}return t}()),function(t){var e=function(t){var e=function(t,e){"A"===e[0].tagName&&(e[0].onclick=function(t){t.stopPropagation()})},n={restrict:"A",link:e};return n};t.directive("bsgNopropagate",["$window",e])}(function(){var t;try{t=angular.module("bsg")}catch(e){t=angular.module("bsg",[])}return t}());